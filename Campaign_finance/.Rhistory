## Loading in libraries
library(dplyr)
library(tidyverse)
library(stringr)
library(ggplot2)
library(tidycensus)
## Kelly Schulz, R
schulz_data <- read_csv("Schulz_ContributionsList.csv")
## Tom Perez, D
perez_data <- read_csv("Perez_ContributionsList.csv")
## Peter Franchot, D
franchot_data <- read_csv("Franchot_ContributionsList.csv")
## Wes Moore, D
moore_data <- read_csv("Moore_ContributionsList.csv")
## John King, D
king_data <- read_csv("King_ContributionsList.csv")
## Rushern Baker, D
baker_data <- read_csv("Baker_ContributionsList.csv")
## Doug Gansler, D
gansler_data <- read_csv("Gansler_ContributionsList.csv")
## Larry Hogan, R, 2014-2021
hogan_data <- read_csv("Hogan_ContributionsList.csv")
View(franchot_data)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidycensus)
library(stringr)
# For data cleaning
library(janitor)
# For loading Excel files
library(readxl)
library(purrr)
# For loading Google Sheets
library(googlesheets4)
# For working with datetime
library(lubridate)
# For pretty tables
#library(kableExtra)
library(knitr)
library(googledrive)
#241
#FY20 Consolidated U.S. Lottery Revenues, Prizes & Government Transfers by GDP*
consolidated_revenues_prizes_and_government_transfers_by_GDP_FY20 <- read_sheet("1AoFbcX_EHmLHUUTM873xZRoa5F6j9l4oODSyXtrV4m0", sheet = "241") %>%
row_to_names(1) %>%
clean_names()
write_rds(consolidated_revenues_prizes_and_government_transfers_by_GDP_FY20, "data/consolidated_government_transfers.rds")
consolidated_government_transfers <- read_rds("data/consolidated_government_transfers.rds")
## this needs to be cleaned. Converting some entries to n/a
consolidated_government_transfers <- consolidated_government_transfers %>%
mutate(across(.cols = everything(), ~ na_if(.x, "NA"))) %>%
mutate(across(.cols = everything(), ~ na_if(.x, "NULL")))
consolidated_government_transfers <- consolidated_government_transfers %>%
mutate(across(.cols = !starts_with("l"), ~ as.numeric(.x)))
##average % as government transfers
mean(consolidated_government_transfers$govt_transfers_as_percent_of_revenue)
##25.8%
##arrange from low to high for government transfer as % of revenue
high_to_low <- consolidated_government_transfers %>%
arrange(desc(govt_transfers_as_percent_of_revenue))
## reading in racial data
lottery_race_tracts <- read_sheet("17vzNmlG4iat1ivmD_ZgzDHbj5ZCBdck7uB-CQFxZX2o", sheet="race") %>%
clean_names()
lottery_race_tracts <- lottery_race_tracts %>%
select(state, black_diff_pct, hisp_diff_pct)
## joining transfer data with racial data
transfers_race_joined <- consolidated_government_transfers %>%
inner_join(lottery_race_tracts, by=c("lottery"="state"))
## per person revenue
transfers_race_joined <- transfers_race_joined %>%
mutate(per_person = consolidated_revenue_mil/x2020_pop_mil)
## loading in historic government transfer data
historic_transfers <- read_sheet("1AoFbcX_EHmLHUUTM873xZRoa5F6j9l4oODSyXtrV4m0", sheet="333") %>%
row_to_names(1) %>%
clean_names()
## cleaning and converting to numeric
historic_transfers <- historic_transfers %>%
mutate(across(.cols = everything(), ~ na_if(.x, "NULL"))) %>%
mutate(across(.cols = !starts_with("l"), ~ as.numeric(.x)))
## how have lottery transfers for governments changed over the last decade?
historic_transfers <- historic_transfers %>%
mutate(transfer_decade_change = ((fy20-fy10)/fy10)*100)
## loading in historic revenue data
historic_revenue <- read_sheet("1AoFbcX_EHmLHUUTM873xZRoa5F6j9l4oODSyXtrV4m0", sheet="330-331") %>%
row_to_names(1) %>%
clean_names() %>%
mutate(across(.cols = everything(), ~ na_if(.x, "NULL"))) %>%
mutate(across(.cols = !starts_with("l"), ~ as.numeric(.x))) %>%
slice(-48, -47)
## how have revenues changed in the past decade?
historic_revenue <- historic_revenue %>%
mutate(decade_change = ((fy20-fy10)/fy10)*100)
## isolating transfer change to join the two datasets
transfer_change_decade <- historic_transfers %>%
select(lottery, transfer_decade_change)
## joining
transfer_revenue_change_joined <- historic_revenue %>%
inner_join(transfer_change_decade, by=c("lottery"))
## government transfers by program
#18-20
#Fiscal 2020 U.S. Lottery Government Transfer by Program
government_transfers_by_program <- read_sheet("1AoFbcX_EHmLHUUTM873xZRoa5F6j9l4oODSyXtrV4m0", sheet = "18-20", col_types='ccccc') %>%
row_to_names(1) %>%
clean_names() %>%
#converting columns from lists to character and changing <NULL>s to "NA"
mutate(across(c(-lottery, -fy20_government_transfer_by_program), parse_number)) %>%
#converting columns from character to numeric
mutate(across(c(-lottery, -fy20_government_transfer_by_program), as.numeric))
## how much in total in 2020 was allocated for education programs across all states?
education_spending <- government_transfers_by_program %>%
filter(str_detect(fy20_government_transfer_by_program, "Education|Tuition|School|University|College"))
education_spending %>%
summarise(total = sum(amount_mil)) ##15.88817 billion in total education spending, 24.05156 billion in total spending across all programs
15.88817/24.05156 ##66.06% of all spending across government programs went to education
## how much in gambling addiction/aid?
gambling_help <- government_transfers_by_program %>%
filter(str_detect(fy20_government_transfer_by_program, "Gambler|Problem|Compulsive"))
gambling_help %>%
summarise(total = sum(amount_mil)) ##14.74 million
14740000/24051560000 ##0.0006128501% of all spending across government programs went to chronic gambling help
View(consolidated_revenues_prizes_and_government_transfers_by_GDP_FY20)
#241
#FY20 Consolidated U.S. Lottery Revenues, Prizes & Government Transfers by GDP*
consolidated_revenues_prizes_and_government_transfers_by_GDP_FY20 <- read_sheet("1AoFbcX_EHmLHUUTM873xZRoa5F6j9l4oODSyXtrV4m0", sheet = "241") %>%
row_to_names(1) %>%
clean_names()
write_rds(consolidated_revenues_prizes_and_government_transfers_by_GDP_FY20, "data/consolidated_government_transfers.rds")
consolidated_government_transfers <- read_rds("data/consolidated_government_transfers.rds")
## this needs to be cleaned. Converting some entries to n/a
consolidated_government_transfers <- consolidated_government_transfers %>%
mutate(across(.cols = everything(), ~ na_if(.x, "NA"))) %>%
mutate(across(.cols = everything(), ~ na_if(.x, "NULL")))
consolidated_government_transfers <- consolidated_government_transfers %>%
mutate(across(.cols = !starts_with("l"), ~ as.numeric(.x)))
##average % as government transfers
mean(consolidated_government_transfers$govt_transfers_as_percent_of_revenue)
##25.8%
##arrange from low to high for government transfer as % of revenue
high_to_low <- consolidated_government_transfers %>%
arrange(desc(govt_transfers_as_percent_of_revenue))
## reading in racial data
lottery_race_tracts <- read_sheet("17vzNmlG4iat1ivmD_ZgzDHbj5ZCBdck7uB-CQFxZX2o", sheet="race") %>%
clean_names()
lottery_race_tracts <- lottery_race_tracts %>%
select(state, black_diff_pct, hisp_diff_pct)
## joining transfer data with racial data
transfers_race_joined <- consolidated_government_transfers %>%
inner_join(lottery_race_tracts, by=c("lottery"="state"))
## per person revenue
transfers_race_joined <- transfers_race_joined %>%
mutate(per_person = consolidated_revenue_mil/x2020_pop_mil)
## loading in historic government transfer data
historic_transfers <- read_sheet("1AoFbcX_EHmLHUUTM873xZRoa5F6j9l4oODSyXtrV4m0", sheet="333") %>%
row_to_names(1) %>%
clean_names()
## cleaning and converting to numeric
historic_transfers <- historic_transfers %>%
mutate(across(.cols = everything(), ~ na_if(.x, "NULL"))) %>%
mutate(across(.cols = !starts_with("l"), ~ as.numeric(.x)))
## how have lottery transfers for governments changed over the last decade?
historic_transfers <- historic_transfers %>%
mutate(transfer_decade_change = ((fy20-fy10)/fy10)*100)
## loading in historic revenue data
historic_revenue <- read_sheet("1AoFbcX_EHmLHUUTM873xZRoa5F6j9l4oODSyXtrV4m0", sheet="330-331") %>%
row_to_names(1) %>%
clean_names() %>%
mutate(across(.cols = everything(), ~ na_if(.x, "NULL"))) %>%
mutate(across(.cols = !starts_with("l"), ~ as.numeric(.x))) %>%
slice(-48, -47)
## how have revenues changed in the past decade?
historic_revenue <- historic_revenue %>%
mutate(decade_change = ((fy20-fy10)/fy10)*100)
## isolating transfer change to join the two datasets
transfer_change_decade <- historic_transfers %>%
select(lottery, transfer_decade_change)
## joining
transfer_revenue_change_joined <- historic_revenue %>%
inner_join(transfer_change_decade, by=c("lottery"))
## government transfers by program
#18-20
#Fiscal 2020 U.S. Lottery Government Transfer by Program
government_transfers_by_program <- read_sheet("1AoFbcX_EHmLHUUTM873xZRoa5F6j9l4oODSyXtrV4m0", sheet = "18-20", col_types='ccccc') %>%
row_to_names(1) %>%
clean_names() %>%
#converting columns from lists to character and changing <NULL>s to "NA"
mutate(across(c(-lottery, -fy20_government_transfer_by_program), parse_number)) %>%
#converting columns from character to numeric
mutate(across(c(-lottery, -fy20_government_transfer_by_program), as.numeric))
## how much in total in 2020 was allocated for education programs across all states?
education_spending <- government_transfers_by_program %>%
filter(str_detect(fy20_government_transfer_by_program, "Education|Tuition|School|University|College"))
education_spending %>%
summarise(total = sum(amount_mil)) ##15.88817 billion in total education spending, 24.05156 billion in total spending across all programs
15.88817/24.05156 ##66.06% of all spending across government programs went to education
## how much in gambling addiction/aid?
gambling_help <- government_transfers_by_program %>%
filter(str_detect(fy20_government_transfer_by_program, "Gambler|Problem|Compulsive"))
gambling_help %>%
summarise(total = sum(amount_mil)) ##14.74 million
14740000/24051560000 ##0.0006128501% of all spending across government programs went to chronic gambling help
View(historic_transfers)
View(historic_revenue)
View(consolidated_revenues_prizes_and_government_transfers_by_GDP_FY20)
View(consolidated_government_transfers)
setwd("~/Documents/GitHub/CNS_Annapolis/Campaign_finance")
